<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Textbox</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#3b2b2b;
  display:flex;
  justify-content:center;
  padding:20px 10px;
}

.app{
  width:100%;
  max-width:420px;
}

textarea{
  width:100%;
  min-height:120px;
  padding:14px;
  font-size:22px;
  border-radius:12px;
  border:none;
  resize:none;
  outline:none;
  background:#bbf7d0;
  box-shadow:0 2px 6px rgba(0,0,0,0.15);
  white-space:pre-wrap;
}

textarea:focus{
  box-shadow:0 0 0 2px #ffffff;
}

.toolbar{
  display:flex;
  justify-content:space-between;
  margin-top:10px;
  gap:6px;
}

.toolbar button{
  flex:1;
  padding:10px 0;
  border:none;
  border-radius:10px;
  background:#4a3838;
  color:white;
  font-size:16px;
}

.toolbar button.active{
  background:#5a4444;
}

.templates-section{
  margin-top:16px;
}

.templates-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:6px;
}

.templates-header button{
  background:#4a3838;
  color:white;
  border:none;
  border-radius:8px;
  padding:6px 10px;
  font-size:13px;
}

.templates{
  display:flex;
  flex-direction:column;
  gap:8px;
}

.template-item{
  position:relative;
  background:#4a3838;
  color:white;
  border-radius:10px;
  padding:12px 12px 18px 12px;
  white-space:pre-wrap;
  font-size:15px;
}

.template-actions{
  position:absolute;
  top:6px;
  right:6px;
  display:flex;
  gap:6px;
}

.template-actions button{
  width:26px;
  height:26px;
  border:none;
  border-radius:50%;
  background:#4a3838;
  color:white;
  font-size:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:0;
}

/* ðŸ”µ PIN ACTIVE STATE â€” ONLY CHANGE */
.template-actions button.pinned{
  background:white;
  color:white;
}
</style>
</head>

<body>
<div class="app">

<textarea id="editor" maxlength="160"></textarea>

<div class="toolbar">
  <button id="boldBtn">B</button>
  <button id="capsBtn">CAPS</button>
  <button id="copyBtn">Copy</button>
  <button id="clearBtn">Clear</button>
</div>

<div class="templates-section">
  <div class="templates-header">
    <button id="addTemplateBtn">Save current text</button>
    <button id="toggleTemplatesBtn">Hide</button>
  </div>
  <div class="templates" id="templates"></div>
</div>

</div>

<script>
const editor = document.getElementById('editor');
const boldBtn = document.getElementById('boldBtn');
const capsBtn = document.getElementById('capsBtn');
const copyBtn = document.getElementById('copyBtn');
const clearBtn = document.getElementById('clearBtn');
const addTemplateBtn = document.getElementById('addTemplateBtn');
const toggleTemplatesBtn = document.getElementById('toggleTemplatesBtn');
const templatesDiv = document.getElementById('templates');

let bold=false;
let caps=false;
let templates = JSON.parse(localStorage.getItem('templates')||'[]');
let hidden=false;

boldBtn.onclick=()=>{
  bold=!bold;
  editor.style.fontWeight=bold?'bold':'normal';
  boldBtn.classList.toggle('active');
};

capsBtn.onclick=()=>{
  caps=!caps;
  editor.value = caps ? editor.value.toUpperCase() : editor.value.toLowerCase();
  capsBtn.classList.toggle('active');
};

copyBtn.onclick=()=>{
  navigator.clipboard.writeText(editor.value);
};

clearBtn.onclick=()=>{
  editor.value='';
};

addTemplateBtn.onclick=()=>{
  if(!editor.value.trim())return;
  templates.unshift({text:editor.value.trim(),pinned:false});
  localStorage.setItem('templates',JSON.stringify(templates));
  editor.value='';
  renderTemplates();
};

toggleTemplatesBtn.onclick=()=>{
  hidden=!hidden;
  templatesDiv.style.display=hidden?'none':'flex';
  toggleTemplatesBtn.textContent=hidden?'Show':'Hide';
};

function renderTemplates(){
  templatesDiv.innerHTML='';
  templates.forEach((tpl,index)=>{
    const div=document.createElement('div');
    div.className='template-item';
    div.textContent=tpl.text;
    div.onclick=()=>editor.value=tpl.text;

    const actions=document.createElement('div');
    actions.className='template-actions';

    const pin=document.createElement('button');
    pin.innerHTML='ðŸ“Œ';
    if(tpl.pinned) pin.classList.add('pinned');
    pin.onclick=(e)=>{
      e.stopPropagation();
      tpl.pinned=!tpl.pinned;
      localStorage.setItem('templates',JSON.stringify(templates));
      renderTemplates();
    };

    const del=document.createElement('button');
    del.innerHTML='âœ•';
    del.onclick=(e)=>{
      e.stopPropagation();
      templates.splice(index,1);
      localStorage.setItem('templates',JSON.stringify(templates));
      renderTemplates();
    };

    actions.appendChild(pin);
    actions.appendChild(del);
    div.appendChild(actions);
    templatesDiv.appendChild(div);
  });
}

renderTemplates();
</script>
</body>
</html>
